内核编译补丁报错：
1.linux/generic/pending-5.4/702-net-ethernet-mtk_eth_soc-enable-threaded-NAPI.patch
lean附带，删除hunk1-2，适配mtketh驱动

2.linux/generic/pending-5.4/999-backport-wireless-ethernet-dispatch.patch
lean附带的wed代码，给开源mt76用的，直接删除

3.linux/mediatek/patches-5.4/0005-dts-mt7622-add-gsw.patch 
openwrt21.02附带，直接删除，不用开发板，要用可自己写dts
4.linux/mediatek/patches-5.4/0005-dts-mt7629-add-gsw.patch 
openwrt21.02附带，直接删除，不用开发板，要用可自己写dts

5.linux/mediatek/patches-5.4/0322-fix-dirty-race-between-do_tmpfile.patch
mtkfeeds附带，修复Hunk#3添加fscrypt_free_filename(&nm)以适配新内核5.4.273

6.linux/mediatek/patches-5.4/0504-macsec-revert-async-support.patch
mtkfeeds附带，直接删除以适配新内核5.4.273

7.linux/mediatek/patches-5.4/0993-arm64-dts-mediatek-Split-PCIe-node-for-MT2712-MT7622.patch
openwrt21.02附带，修改mt7622-rfb1.dts的Hunk以适配新内核5.4.273

8.linux/mediatek/patches-5.4/1024-pcie-add-multi-MSI-support.patch
mtkfeeds附带,删除Hunk#3以适配新内核5.4.273

9.linux/mediatek/patches-5.4/7000-fix-race-inside-napi-enable.patch
mtkfeeds附带,此补丁依赖于openwrt21.02的600-604补丁
604-v5.12-net-fix-hangup-on-napi_disable-for-threaded-napi.patch
603-v5.12-net-fix-race-between-napi-kthread-mode-and-busy-poll.patch
602-v5.12-net-add-sysfs-attribute-to-control-napi-threaded-mod.patch
601-v5.12-net-implement-threaded-able-napi-poll-loop-support.patch
600-v5.12-net-extract-napi-poll-functionality-to-__napi_poll.patch
但op与lean补丁690-net-add-support-for-threaded-NAPI-polling.patch冲突，故删除lean补丁，添加op补丁



其他编译报错：
1.linux-5.4.273/arch/arm64/crypto/sha1-ce.ko' is missing.
依赖关系package-ppp->kmod-ppp->kmod-mppp->kmod-crypto-sha1
内核选项添加CONFIG_ARM_CRYPTO=y，以编译sha1-cryptoextension

2.fstools双启动补丁报错
由于fstools版本和openwrt21.02差距过大，部分Hunk无法修复，且不需要双启动，故删除该补丁，
同时回退补丁120-fstools-split-libblkid-tiny-as-dependency.patch

3.生成itb内核映像失败
dd: failed to open ''$'\n\t''rootfs {'$'\n\t\t''size = <9933650>;'$'\n\n\t\t''hash-1 {'$'\n\t\t\t''value = <0x7e115028>;'$'\n\t\t\t''algo = "crc32";'$'\n\t\t''};'$'\n\n\t\t''hash-2 {'$'\n\t\t\t''value = <0x7d4e52a8 0xff0981e2 0x79b27e2a 0xc8f4b948 0xb05f62d4>;'$'\n\t\t\t''algo = "sha1";'$'\n\t\t''};'$'\n\t''};'$'\n': No such file or directory
解决：回退固件安全性校验补丁9000-9003
9990-fit-replace-@-with--.patch
9991-fit-secure-boot-and-anti-rollback-support.patch
9992-fit-support-embed-squashfs-rootfs-hash.patch
9993-fit-embed-squashfs-rootfs-hash-into-kernel-fit-image.patch

运行阶段：
1.wan口无法自动获取ip地址（光猫口子问题，换口子解决了）
2.有线占cpu问题解决了，功能算正常了，但无线依然占用大量softirq且容易断流（有可能mtkdriver版本问题，也有可能我的内核编译方式有问题，需要高人指点）